<!-- HTML and CSS inspired by https://codepen.io/jonnitto/pen/OVmvPB-->
<app-navbar-admin></app-navbar-admin>
<form class="form-card">
  <fieldset class="form-fieldset">
    <legend class="form-legend">Ajouter / modifier un produit</legend>

    <div class="form-element form-input">
      <input name="name" id="field-name" class="form-element-field" [(ngModel)]="product.name" placeholder="Saisissez le nom du produit" type="input" required />
      <div class="form-element-bar"></div>
      <label class="form-element-label" for="field-name">Nom</label>
      <small class="form-element-hint">(champ obligatoire)</small>
    </div>

    <div class="form-element form-input">
      <input name="quantity" id="field-quantity" class="form-element-field" [(ngModel)]="product.quantity" placeholder="Saisissez un chiffre et une unité" type="text" required/>
      <div class="form-element-bar"></div>
      <label class="form-element-label" for="field-quantity">Quantité (+ unité)</label>
      <small class="form-element-hint">(champ obligatoire)</small>
    </div>

    <div class="form-element form-input">
      <input name="brand" id="field-brand" class="form-element-field" [(ngModel)]="product.brands" placeholder="Précisez la marque" type="text" required />
      <div class="form-element-bar"></div>
      <label class="form-element-label" for="field-brand">Marque</label>
      <small class="form-element-hint">(champ obligatoire)</small>
    </div>

    <div class="form-element form-input">
      <input name="labels" id="field-labels" class="form-element-field" [(ngModel)]="product.labels" placeholder="" type="text" />
      <div class="form-element-bar"></div>
      <label class="form-element-label" for="field-labels">Labels, certifications, récompenses</label>
    </div>

    <div class="form-element form-input">
      <input name="categories" id="field-categories" class="form-element-field" [(ngModel)]="product.categories" placeholder="Indiquez la/les catégories du produit" type="text" required />
      <div class="form-element-bar"></div>
      <label class="form-element-label" for="field-categories">Catégories</label>
      <small class="form-element-hint">(champ obligatoire)</small>
    </div>

    <div class="form-element form-input">
      <input name="packaging" id="field-packaging" class="form-element-field" [(ngModel)]="product.packaging" placeholder="ex: carton, bouteille en plastique, etc." type="text" required />
      <div class="form-element-bar"></div>
      <label class="form-element-label" for="field-packaging">Conditionnement</label>
      <small class="form-element-hint">(champ obligatoire)</small>
    </div>

    <div class="form-element form-input">
      <input name="ingredients" name="brand" id="field-ingredients" class="form-element-field" [(ngModel)]="product.ingredients" placeholder="Listez les ingrédients" type="text" required />
      <div class="form-element-bar"></div>
      <label class="form-element-label" for="field-ingredients">Ingrédients</label>
      <small class="form-element-hint">(champ obligatoire)</small>
    </div>

    <div class="form-element form-input">
      <input name="allergens" id="field-allergens" class="form-element-field" [(ngModel)]="product.allergens" placeholder="" type="text" required />
      <div class="form-element-bar"></div>
      <label class="form-element-label" for="field-allergens">Allergènes</label>
      <small class="form-element-hint">(champ obligatoire)</small>
    </div>
    <!-- buttons to choose nutriscore -->
    <div class="form-radio form-radio-block">
      <div class="form-sublegend">NutriScore</div>
      <div class="pt-3 d-flex flex-wrap">
        <label class="form-radio-label"> <input name="nutriscore" name="nutriscore" class="form-radio-field" [(ngModel)]="product.nutriscore" type="radio" value="A" /> <i class="form-radio-button"></i> <span>A</span>
        </label>
        <label class="form-radio-label"> <input name="nutriscore" class="form-radio-field" [(ngModel)]="product.nutriscore" type="radio" value="B" /> <i class="form-radio-button"></i> <span>B</span>
        </label>
        <label class="form-radio-label"> <input name="nutriscore" class="form-radio-field" [(ngModel)]="product.nutriscore" type="radio" value="C" /> <i class="form-radio-button"></i> <span>C</span>
        </label>
        <label class="form-radio-label"> <input name="nutriscore" class="form-radio-field" [(ngModel)]="product.nutriscore" type="radio" value="D" /> <i class="form-radio-button"></i> <span>D</span>
        </label>
        <label class="form-radio-label"> <input name="nutriscore" class="form-radio-field" [(ngModel)]="product.nutriscore" type="radio" value="E" /> <i class="form-radio-button"></i> <span>E</span>
        </label>
      </div>
    </div>

    <!-- Nutritional values -->
    <div class="form-radio form-radio-block">
      <div class="form-sublegend">Repères nutritionnels pour 100g</div>

      <div class="form-element form-input">
        <input name="lipids" id="field-lipids" class="form-element-field" [(ngModel)]="product.nutrients.lipids"
        placeholder="Valeur en g" type="number" required />
        <div class="form-element-bar"></div>
        <label class="form-element-label" for="field-lipids">Matières grasses / Lipides</label>
      </div>

      <div class="form-element form-input">
        <input name="saturated" id="field-saturated" class="form-element-field" [(ngModel)]="product.nutrients.saturated"
        placeholder="Valeur en g" type="number" required />
        <div class="form-element-bar"></div>
        <label class="form-element-label" for="field-saturated">Acides gras saturés</label>
      </div>

      <div class="form-element form-input">
        <input name="sugars" id="field-sugars" class="form-element-field" [(ngModel)]="product.nutrients.sugars"
        placeholder="Valeur en g" type="number" required />
        <div class="form-element-bar"></div>
        <label class="form-element-label" for="field-sugars">Sucres</label>
      </div>

      <div class="form-element form-input">
        <input name="salt" id="field-salt" class="form-element-field" [(ngModel)]="product.nutrients.salt" placeholder="Valeur en g"
        type="number" required />
        <div class="form-element-bar"></div>
        <label class="form-element-label" for="field-salt">Sel</label>
      </div>
    </div>

  </fieldset>

  <div class="form-actions">
    <button class="btn btn-outline-danger rounded-0"  routerLink="/admin/produits" type="reset">Annuler</button>

    <button class="btn btn-success rounded-0" (click)="open(content)" type="submit" (click)="add()" *ngIf="addForm">Confirmer</button>

    <button class="btn btn-success rounded-0" (click)="openmodif(contentmodif)" type="submit" (click)="update()"  *ngIf="!addForm">Confirmer</button>
  </div>
</form>


<ng-template #content let-modal>

  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Ajout produit</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')" routerLink="/admin/produits">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form>
      <div class="form-group">
        <p>L' ajout du produit a été éffectué !</p>
        <div class="input-group">         
          <div class="input-group-append">
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')" routerLink="/admin/produits">Ok</button>
    <button type="button" class="btn btn-outline-success" (click)="modal.close('Save click')">Ajouter nouveau produit</button>
  </div>

</ng-template>

<hr>

<ng-template #contentmodif let-modal>

  <div class="modal-header" id="modal2">
    <h4 class="modal-title" id="modal-basic-title-modif">Modification produit</h4>
    <button type="button" class="close" aria-label="Close" routerLink="/admin/produits" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form>
      <div class="form-group">
        <p>Les modifications ont bien été prisent en compte !</p>
        <div class="input-group">         
          <div class="input-group-append">
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-success" (click)="modal.close('Save click')" routerLink="/admin/produits">Ok</button>
    
  </div>

</ng-template>

<hr>
